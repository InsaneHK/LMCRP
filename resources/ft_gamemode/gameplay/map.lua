local blips = {
    
    {title="Poste de Polices", colour=0, id=60, x=436.811, y=-982.757, z=30.6986},
    
    {title="Hopital", colour=2, id=61, x=1151.31, y=-1529.95, z=34.9904},

    --------------------------------------

    {title="Distributeur de Billets", colour=2, id=431, x=-164.952, y=233.604 ,z=94.922},
    {title="Distributeur de Billets", colour=2, id=431, x=-866.571, y=-186.865 ,z=37.667},
    {title="Distributeur de Billets", colour=2, id=431, x=-1429.963, y=-210.850 ,z=46.500},
    {title="Distributeur de Billets", colour=2, id=431, x=-1416.254, y=-211.788 ,z=46.500},
    {title="Distributeur de Billets", colour=2, id=431, x=-537.711, y=-854.112 ,z=29.296},
    {title="Distributeur de Billets", colour=2, id=431, x=146.994, y=-1034.810 ,z=29.344},
    {title="Distributeur de Billets", colour=2, id=431, x=295.506, y=-894.911  ,z=29.210},
    {title="Distributeur de Billets", colour=2, id=431, x=288.392, y=-1282.154 ,z=29.643},
    {title="Distributeur de Billets", colour=2, id=431, x=-261.707, y=-2012.668 ,z=30.146},
    {title="Distributeur de Billets", colour=2, id=431, x=-272.831, y=-2025.084 ,z=30.146},
    
    {title="Banque Centrale", colour=2, id=434, x=260.232, y=205.886, z=106.284},

    ---------------------------------------
    
    {title="Aéroport", colour=3, id=90, x=-1336.25, y=-3043.99, z=13.9444},
    
    ---------------------------------------

    {title="Supérette", colour=0, id=52, x=28.463, y=-1353.033, z=29.340},
    {title="Supérette", colour=0, id=52, x=-54.937, y=-1759.108, z=29.005},
    {title="Supérette", colour=0, id=52, x=375.858, y=320.097, z=103.433},
    {title="Supérette", colour=0, id=52, x=1143.813, y=-980.601, z=46.205},
    {title="Supérette", colour=0, id=52, x=1695.284, y=4932.052, z=42.078},
    {title="Supérette", colour=0, id=52, x=2686.051, y=3281.089, z=55.241},
    {title="Supérette", colour=0, id=52, x=1967.648, y=3735.871, z=32.221},
    {title="Supérette", colour=0, id=52, x=-2977.137, y=390.652, z=15.024},
    {title="Supérette", colour=0, id=52, x=1160.269, y=-333.137, z=68.783},
    {title="Supérette", colour=0, id=52, x=-1492.784, y=-386.306, z=39.798},
    {title="Supérette", colour=0, id=52, x=-1229.355, y=-899.230, z=12.263},
    {title="Supérette", colour=0, id=52, x=-712.091, y=-923.820, z=19.014},
    {title="Supérette", colour=0, id=52, x=-1816.544, y=782.072, z=137.600},
    {title="Supérette", colour=0, id=52, x=1729.689, y=6405.970, z=34.453},
    {title="Supérette", colour=0, id=52, x=2565.705, y=385.228, z=108.463},

    {title="Le Plein la Panse", colour=0, id=162, x=-361.400, y=275.493, z=86.422},

    {title="L'Alcool, C'est de l'Eau", colour=0, id=93, x=-560.275, y=286.431, z=82.176},

    {title="Le P'tit Jaune", colour=5, id=442, x=-1040.603, y=-1474.855, z=5.575},

    {title="Le Beau Poissonnet", colour=0, id=266, x=-1037.552, y=-1396.852, z=5.553},
    
    {title="StarBugs", colour=0, id=205, x=-576.451, y=-678.133, z=32.363},

    {title="Los Tacos", colour=5, id=77, x=-1168.351, y=-1267.057, z=6.204},

    -------------------------------------
    
    {title="Magasin d'armes", colour=1, id=110, x=21.347, y=-1106.497, z=29.797},
    {title="Magasin d'armes", colour=1, id=110, x=-331.213, y=6083.375, z=31.455},

    {title="Station de lavage automobile", colour=0, id=100, x=24.829, y=-1391.983, z=29.334},

   -- {title="Bateau de Pêche", colour=5, id=68, x=1299.073, y=-3162.303, z=5.965},

    {title="Véhicule de Location", colour=0, id=369, x=-893.903, y=-2332.390, z=6.709},

    --{title="Mairie", colour=4, id=419, x=236.667, y=-408.610, z=47.924},

    {title="Chez Momo", colour=47, id=78, x=1983.321, y=3705.379, z=32.119},

    {title="Garage Dépanneur", colour=17, id=446, x=-212.299, y=-1324.054, z=30.890},

    {title="Garage", colour=3, id=50, x=-15.267, y=-612.619, z=35.862},
    {title="Garage", colour=3, id=50, x=-616.190, y=52.387, z=43.745},
    {title="Garage", colour=3, id=50, x=-988.308, y=-1423.514, z=4.653},
    {title="Garage", colour=3, id=50, x=-26.611, y=-1672.335, z=29.492},
    {title="Garage", colour=3, id=50, x=883.558, y=-1024.922, z=32.703},
    {title="Garage", colour=3, id=50, x=2506.950, y=4097.209, z=38.714},
    {title="Garage", colour=3, id=50, x=-38.868, y=6420.195, z=31.490},

    --{title="Fourrière", colour=4, id=50, x=378.260, y=-1629.433, z=28.441},

    --{title="Dépôt Mineur", colour=22, id=318, x=972.834, y=-1919.387, z=31.185},

   -- {title="Scierie Hayren", colour=0, id=85, x=-552.346, y=5348.475, z=74.743},

    --{title="Dépôt Vigneron", colour=7, id=318, x=-1900.185, y=2035.630, z=140.740},

    --{title="Dépôt Boulanger", colour=5, id=318, x=389.694, y=3591.195, z=33.292},

    --{title="Dépôt Brasseur", colour=31, id=318, x=-76.395, y=209.156, z=96.433},

    --{title="Dépôt Fermier", colour=2, id=318, x=903.604, y=-1541.971, z=30.505},     

    {title="Station Essence", colour=0, id=361, x=49.41872, y=2778.793, z=58.04395},
    {title="Station Essence", colour=0, id=361, x=263.8949, y=2606.463, z=44.98339},
    {title="Station Essence", colour=0, id=361, x=1039.958, y=2671.134, z=39.55091},
    {title="Station Essence", colour=0, id=361, x=1207.26, y=2660.175, z=37.89996},
    {title="Station Essence", colour=0, id=361, x=2539.685, y=2594.192, z=37.94488},
    {title="Station Essence", colour=0, id=361, x=2679.858, y=3263.946, z=55.24057},
    {title="Station Essence", colour=0, id=361, x=2005.055, y=3773.887, z=32.40393},
    {title="Station Essence", colour=0, id=361, x=1687.156, y=4929.392, z=42.07809},
    {title="Station Essence", colour=0, id=361, x=1701.314, y=6416.028, z=32.76395},
    {title="Station Essence", colour=0, id=361, x=179.8573, y=6602.839, z=31.86817},
    {title="Station Essence", colour=0, id=361, x=-94.46199, y=6419.594, z=31.48952},
    {title="Station Essence", colour=0, id=361, x=-2554.996, y=2334.402, z=33.07803},
    {title="Station Essence", colour=0, id=361, x=-1800.375, y=803.6619, z=138.6512},
    {title="Station Essence", colour=0, id=361, x=-1437.622, y=-276.7476, z=46.20771},
    {title="Station Essence", colour=0, id=361, x=-2096.243, y=-320.2867, z=13.16857},
    {title="Station Essence", colour=0, id=361, x=-724.6192, y=-935.1631, z=19.21386},
    {title="Station Essence", colour=0, id=361, x=-526.0198, y=-1211.003, z=18.18483},
    {title="Station Essence", colour=0, id=361, x=-70.21484, y=-1761.792, z=29.53402},
    {title="Station Essence", colour=0, id=361, x=265.6484, y=-1261.309, z=29.29294},
    {title="Station Essence", colour=0, id=361, x=819.6538, y=-1028.846, z=26.40342},
    {title="Station Essence", colour=0, id=361, x=1208.951, y=-1402.567, z=35.22419},
    {title="Station Essence", colour=0, id=361, x=1181.381, y=-330.8471, z=69.31651},
    {title="Station Essence", colour=0, id=361, x=620.8434, y=269.1009, z=103.0895},
    {title="Station Essence", colour=0, id=361, x=2581.321, y=362.0393, z=108.4688},
    {title="Station Essence", colour=0, id=361, x=1785.363, y=3330.372, z=41.38188},

   -- {title="Agence Gouvernementale", colour=4, id=88, x=132.843, y=-763.575, z=45.752},

    --{title="Bureau de Vote", colour=0, id=419, x=-266.214, y=-2035.967, z=30.146},

    {title="Station de Taxi", colour=5, id=56, x=908.493, y=-177.125, z=74.182},
  }

Citizen.CreateThread(function()

    for _, info in pairs(blips) do
      info.blip = AddBlipForCoord(info.x, info.y, info.z)
      SetBlipSprite(info.blip, info.id)
      SetBlipDisplay(info.blip, 4)
      SetBlipScale(info.blip, 0.9)
      SetBlipColour(info.blip, info.colour)
      SetBlipAsShortRange(info.blip, true)
      BeginTextCommandSetBlipName("STRING")
      AddTextComponentString(info.title)
      EndTextCommandSetBlipName(info.blip)
    end

  --load unloaded ipl's
  LoadMpDlcMaps()
  EnableMpDlcMaps(true)
  RequestIpl("chop_props")
  RequestIpl("FIBlobby")
  RemoveIpl("FIBlobbyfake")
  RequestIpl("FBI_colPLUG")
  RequestIpl("FBI_repair")
  RequestIpl("v_tunnel_hole")
  RequestIpl("TrevorsMP")
  RequestIpl("TrevorsTrailer")
  RequestIpl("TrevorsTrailerTidy")
  RemoveIpl("farm_burnt")
  RemoveIpl("farm_burnt_lod")
  RemoveIpl("farm_burnt_props")
  RemoveIpl("farmint_cap")
  RemoveIpl("farmint_cap_lod")
  RequestIpl("farm")
  RequestIpl("farmint")
  RequestIpl("farm_lod")
  RequestIpl("farm_props")
  RequestIpl("facelobby")
  RemoveIpl("CS1_02_cf_offmission")
  RequestIpl("CS1_02_cf_onmission1")
  RequestIpl("CS1_02_cf_onmission2")
  RequestIpl("CS1_02_cf_onmission3")
  RequestIpl("CS1_02_cf_onmission4")
  RequestIpl("v_rockclub")
  RemoveIpl("hei_bi_hw1_13_door")
  RequestIpl("bkr_bi_hw1_13_int")
  RequestIpl("ufo")
  RemoveIpl("v_carshowroom")
  RemoveIpl("shutter_open")
  RemoveIpl("shutter_closed")
  RemoveIpl("shr_int")
  RemoveIpl("csr_inMission")
  RequestIpl("v_carshowroom")
  RequestIpl("shr_int")
  RequestIpl("shutter_closed")
  RequestIpl("smboat")
  RequestIpl("cargoship")
  RequestIpl("railing_start")
  RemoveIpl("sp1_10_fake_interior")
  RemoveIpl("sp1_10_fake_interior_lod")
  RequestIpl("sp1_10_real_interior")
  RequestIpl("sp1_10_real_interior_lod")
  RemoveIpl("id2_14_during_door")
  RemoveIpl("id2_14_during1")
  RemoveIpl("id2_14_during2")
  RemoveIpl("id2_14_on_fire")
  RemoveIpl("id2_14_post_no_int")
  RemoveIpl("id2_14_pre_no_int")
  RemoveIpl("id2_14_during_door")
  RequestIpl("id2_14_during1")
  RequestIpl("coronertrash")
  RequestIpl("Coroner_Int_on")
  RemoveIpl("Coroner_Int_off")
  RemoveIpl("bh1_16_refurb")
  RemoveIpl("jewel2fake")
  RemoveIpl("bh1_16_doors_shut")
  RequestIpl("refit_unload")
  RequestIpl("post_hiest_unload")
  RequestIpl("Carwash_with_spinners")
  RequestIpl("ferris_finale_Anim")
  RemoveIpl("ch1_02_closed")
  RequestIpl("ch1_02_open")
  RequestIpl("AP1_04_TriAf01")
  RequestIpl("CS2_06_TriAf02")
  RequestIpl("CS4_04_TriAf03")
  RemoveIpl("scafstartimap")
  RequestIpl("scafendimap")
  RemoveIpl("DT1_05_HC_REMOVE")
  RequestIpl("DT1_05_HC_REQ")
  RequestIpl("DT1_05_REQUEST")
  RequestIpl("FINBANK")
  RemoveIpl("DT1_03_Shutter")
  RemoveIpl("DT1_03_Gr_Closed")
  RequestIpl("ex_sm_13_office_01a")
  RequestIpl("ex_sm_13_office_01b")
  RequestIpl("ex_sm_13_office_02a")
  RequestIpl("ex_sm_13_office_02b")
  RequestIpl("ex_dt1_02_office_02b")

  RequestIpl("apa_v_mp_h_02_a")
  RequestIpl("apa_v_mp_h_03_c")
  RequestIpl("apa_v_mp_h_04_b")
end)

Citizen.CreateThread(function()
	while true do
		Citizen.Wait(0)
		local players = {}

    for i = 0, 31 do
      if NetworkIsPlayerActive(i) then
        table.insert(players, i)
      end
    end

    for k, v in pairs(players) do
      if not GetBlipFromEntity(GetPlayerPed(v)) then
        if GetPlayerPed(v) == GetPlayerPed(-1) then return end
        local blip = AddBlipForEntity(GetPlayerPed(v))
        SetBlipColour(blip, 1)
      end
    end
  end
end)
